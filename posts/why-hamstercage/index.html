<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Why Hamstercage - Hamstercage</title><meta name=description content="Alternatives, and why they might not be a good fit"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Hamstercage","url":"https:\/\/hamstercage.io\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/hamstercage.io\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/hamstercage.io\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/hamstercage.io\/posts\/why-hamstercage\/","name":"Why hamstercage"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":""},"headline":"Why Hamstercage","description":"Hamstercage is not unique in its goal to manage config files. Here is an overview of some other tools, and how it differs from them.\nWhile this discussion focuses on the use of Git as a version control system, others can be used interchangeably.\nThe Big Guns When managing large amounts of systems, a number of requirements come to the fore:\nManage all aspects of the entire landscape from a single source Roll out changes using an automated, centralized process Make it possible to configure a large number of hosts that are very similar Have clear reporting on changes to the systems Ability to verify correct configuration with automated tests Ability to deploy to a test bed to verify changes before they are applied to production There are probably many more such aspects, but the main takeaway for configuration management systems supporting many or all of these requirements is that they are large and complex.","inLanguage":"en","wordCount":1020,"datePublished":"2022-06-06T10:33:00","dateModified":"2022-06-06T10:33:00","image":"https:\/\/hamstercage.io\/","keywords":[""],"mainEntityOfPage":"https:\/\/hamstercage.io\/posts\/why-hamstercage\/","publisher":{"@type":"Organization","name":"https:\/\/hamstercage.io\/","logo":{"@type":"ImageObject","url":"https:\/\/hamstercage.io\/","height":60,"width":60}}}</script><meta property="og:title" content="Why Hamstercage"><meta property="og:description" content="Alternatives, and why they might not be a good fit"><meta property="og:url" content="https://hamstercage.io/posts/why-hamstercage/"><meta property="og:type" content="website"><meta property="og:site_name" content="Hamstercage"><meta name=twitter:title content="Why Hamstercage"><meta name=twitter:description content="Alternatives, and why they might not be a good fit"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.100.1"><link rel=alternate href=https://hamstercage.io/index.xml type=application/rss+xml title=Hamstercage><link rel=stylesheet href=https://hamstercage.io/css/katex.min.css><link rel=stylesheet href=https://hamstercage.io/fontawesome/css/all.css><link rel=stylesheet href=https://hamstercage.io/css/bootstrap.min.css><link rel=stylesheet href=https://hamstercage.io/css/main.css><link rel=stylesheet href=https://hamstercage.io/css/fonts.css><link rel=stylesheet href=https://hamstercage.io/css/syntax.css><link rel=stylesheet href=https://hamstercage.io/css/codeblock.css><link rel=stylesheet href=https://hamstercage.io/css/photoswipe.min.css><link rel=stylesheet href=https://hamstercage.io/css/photoswipe.default-skin.min.css></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://hamstercage.io/>Hamstercage</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Home href=/>Home</a></li><li><a title=Documentation href=/documentation/>Documentation</a></li></ul></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Why Hamstercage</h1><h2 class=post-subheading>Alternatives, and why they might not be a good fit</h2><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on 6.6.2022</span></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>Hamstercage is not unique in its goal to manage config files. Here is an overview of some other tools, and how it differs from them.</p><p>While this discussion focuses on the use of Git as a version control system, others can be used interchangeably.</p><h1 id=the-big-guns>The Big Guns</h1><p>When managing large amounts of systems, a number of requirements come to the fore:</p><ul><li>Manage all aspects of the entire landscape from a single source</li><li>Roll out changes using an automated, centralized process</li><li>Make it possible to configure a large number of hosts that are very similar</li><li>Have clear reporting on changes to the systems</li><li>Ability to verify correct configuration with automated tests</li><li>Ability to deploy to a test bed to verify changes before they are applied to production</li></ul><p>There are probably many more such aspects, but the main takeaway for configuration management systems supporting many or all of these requirements is that they are large and complex. Mastering them brings with it a steep learning curve, and depending on the size of your operation, you might need dedicated hardware just for the configuration management solution, and maybe dedicated staff.</p><p>These tools use a “push” approach, where the target systems are actively deployed from a (more or less) centralized infrastructure; the individual hosts and their configuration is overwritten from the central store.</p><p>Examples of these products include:</p><ul><li><a href=https://www.ansible.com>Ansible</a></li><li><a href=https://www.chef.io>Chef</a></li><li><a href=https://puppet.com>Puppet</a></li><li><a href=https://saltproject.io>SaltStack</a></li></ul><h2 id=configuring-packages-through-an-abstraction>Configuring Packages Through an Abstraction</h2><p>One aspect that might make using an approach like this more complicated is the actual configuration: typically, you do not create complete, custom config files yourself, but you rely on modules for these systems to create the config files automatically from variables you provide. This can work extremly well, reducing large config files to just a handful of variables.</p><p>However, it requires these modules to provide a good abstraction of the configuration options for a packages. The quality of these abstractions, and how well they fit your use case, can vary significantly, and the complexity of these modules can make chasing configuration problems quite hard, as it is sometimes not easy to determine where a certain line in a deployed config files actually comes from, or why setting a variable in the manifest does not lead to the desired results.</p><p>Hamstercage foregoes any such abstractions, managing the contents of the config files directly.</p><h1 id=manage-config-files-directly-through-git>Manage Config Files Directly Through Git</h1><p>This approach is using a “pull” approach, where changes to files shared between hosts are pulled individually on each host.</p><p>It is possible to manage config files directly in a Git repo, however, there are some limitations:</p><ul><li>Git does not keep track of file ownership and permissions (except for the execute bit)</li><li>If you want to manage not only files in <code>/etc</code>, but also in other places (like <code>/usr/local/etc</code>), the Git repo might span the entire filesystem. This can be inefficient, or lead to accidents when files are changed by Git that were not intended to be changed.</li><li>Tricks can be played with symbolic links, but this can be confusing.</li></ul><p>There are a number of recipes to be found on how to set up such a Git repo, and how to work around some of the issues. However, most of them seem to be homegrown, single approaches without good documentation.</p><h1 id=manage-config-files-through-git-with-a-helper-etckeeper>Manage Config Files Through Git With a Helper: etckeeper</h1><p>One example of augmenting Git so it can manage the necessary data is <a href=https://etckeeper.branchable.com>etckeeper</a>: it hooks into the version control system to fix up files before checkin, and after checkout.</p><p>etckeeper would seem like it already does pretty much what Hamstercage does, but there are some crucial differences:</p><ul><li>etckeeper can only manage a single directory, so if you want to manage both <code>/etc</code> and <code>/usr/local/etc</code>, you will need two Git repos, or you will need your Git repo to span the entire filesystem.</li><li>etckeeper manages the files directly in the Git repo; a <code>git pull</code> wil immediately change the system files.</li><li>the repo can only apply to a single host.</li><li>etckeeper is aimed at Debian-based Linux distributions; it&rsquo;s possible to use on other distributions or BSD, but that makes it more complicated.</li><li>etckeeper hooks into the package manager, automatically creating commits when packages are installed. This might add a lot of files to the repo that remain unchanged from the package defaults.</li><li>etckeeper can automatically commit all changes once a day, keeping a record of incidential changes.</li></ul><p>In contrast, Hamstercage:</p><ul><li>can manage files anywhere in the filesystem</li><li>sync between the installed files and the Git repo, with control over which changes to apply or save</li><li>manage multiple hosts from a single repo</li><li>works on any host that can run Python and Git</li><li>does not require interaction with a package manager, or anything else</li><li>does not automatically save changes to the managed files</li></ul><p>In summary, etckeeper is focused on managing <code>/etc/</code> with as little interaction as possible, whereas Hamstercage takes a more hands-off approach, forcing you to create automatic actions yourself, for example, with a custom cron job.</p><h1 id=and-now-for-something-completely-different>And now for something completely different</h1><p>A relatively new approach for managing packages and configuration (and the way packages are built and installed) comes from <a href=https://nixos.org>NixOS</a>, which uses a purely functional model. This approach treats the config files (and everything else) not as something to be edited directly, but as the result of a function. This is similar to configuration management systems, but differs in the way the configuration is created and applied to the target.</p><p>In a sense, think of NixOS and the nix package manager as following the same principles as building Docker images, and being able to install those images as native packages on your system.</p><p>This approach is a very different way of managing your system, and it might work really well, but it also is quite different from “classical” system administration, much the same way that using Docker Compose or Kubernetes differs from managing VMs to run services.</p><p>NixOS and the nix package manager also rely on package configuration being controlled throught the package and variables that you set when creating the packages, like the large configuration management systems. The upsides and downsides apply here as well.</p></article><ul class="pager blog-pager"><li class=previous><a href=https://hamstercage.io/posts/introducing-hamstercage/ data-toggle=tooltip data-placement=top title="Introducing Hamstercage">&larr; Previous Post</a></li></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"></ul><p class="credits text-muted">© 2022 Stefan Bethke and Hamstercage Contributors. <a href=https://github.com/halogenica/beautifulhugo>Theme Beautiful Hugo</a></p></div></div></div></footer><script src=https://hamstercage.io/js/katex.min.js></script>
<script src=https://hamstercage.io/js/auto-render.min.js></script>
<script src=https://hamstercage.io/js/jquery.min.js></script>
<script src=https://hamstercage.io/js/bootstrap.min.js></script>
<script src=https://hamstercage.io/js/main.js></script><script>renderMathInElement(document.body)</script><script src=https://hamstercage.io/js/photoswipe.min.js></script>
<script src=https://hamstercage.io/js/photoswipe-ui-default.min.js></script><script src=https://hamstercage.io/js/load-photoswipe.js></script></body></html>